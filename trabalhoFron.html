<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="UTF-8" />
    <title>Tabela de Treino</title>
    <link rel="stylesheet" href="css/estilo.css">
</head>
<body>
    <header>
        <h1>üí™ Tabela de Treino</h1>
        <p>Organize seus exerc√≠cios e acompanhe seu progresso</p>
    </header>

    <div class="container">
        <div class="form-section">
            <h2>Adicionar Novo Exerc√≠cio</h2>
            <form id="exercicioForm">
                <div class="form-group">
                    <label for="exercicio">Nome do Exerc√≠cio *</label>
                    <input type="text" id="exercicio" placeholder="Ex: Supino reto" maxlength="50" required>
                    <span class="error-message" id="errorExercicio">Campo obrigat√≥rio</span>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="series">N√∫mero de S√©ries *</label>
                        <input type="number" id="series" min="1" max="20" value="3" required>
                        <span class="error-message" id="errorSeries">Insira entre 1 e 20 s√©ries</span>
                    </div>

                    <div class="form-group">
                        <label for="repeticoes">Repeti√ß√µes por S√©rie *</label>
                        <input type="number" id="repeticoes" min="1" max="100" value="12" required>
                        <span class="error-message" id="errorRepeticoes">Insira entre 1 e 100 repeti√ß√µes</span>
                    </div>

                    <div class="form-group">
                        <label for="carga">Carga (kg)</label>
                        <input type="number" id="carga" min="0" max="500" step="0.5" value="0" placeholder="0">
                        <span class="error-message" id="errorCarga">M√°ximo 500 kg</span>
                    </div>
                </div>

                <div class="btn-group">
                    <button type="submit" class="btn-primary">‚ûï Adicionar Exerc√≠cio</button>
                    <button type="button" class="btn-warning" id="limparForm">üîÑ Limpar Formul√°rio</button>
                </div>
            </form>
        </div>

        <div class="btn-group">
            <button class="btn-success" id="gravar">üíæ Salvar no Armazenamento</button>
            <button class="btn-primary" id="recuperar">üì• Recuperar do Armazenamento</button>
            <button class="btn-danger" id="limpar">üóëÔ∏è Limpar Tudo</button>
        </div>

        <div class="lists-container">
            <div class="list-section">
                <h3>üìã Exerc√≠cios Pendentes</h3>
                <div id="listaPendentes"></div>
            </div>

            <div class="list-section">
                <h3>‚úÖ Exerc√≠cios Conclu√≠dos</h3>
                <div id="listaConcluidos"></div>
            </div>
        </div>
    </div>

    <script>
        class Exercicio {
            constructor(nome, series, repeticoes, carga) {
                this.id = Date.now() + Math.random();
                this.nome = nome.trim();
                this.series = parseInt(series);
                this.repeticoes = parseInt(repeticoes);
                this.carga = parseFloat(carga);
                this.concluido = false;
            }
        }

        class GerenciadorExercicios {
            constructor() {
                this.exerciciosPendentes = [];
                this.exerciciosConcluidos = [];
            }

            adicionarExercicio(exercicio) {
                this.exerciciosPendentes.push(exercicio);
            }

            concluirExercicio(id) {
                const index = this.exerciciosPendentes.findIndex(ex => ex.id === id);
                if (index !== -1) {
                    const exercicio = this.exerciciosPendentes.splice(index, 1)[0];
                    exercicio.concluido = true;
                    this.exerciciosConcluidos.push(exercicio);
                    return true;
                }
                return false;
            }

            desfazerConclusao(id) {
                const index = this.exerciciosConcluidos.findIndex(ex => ex.id === id);
                if (index !== -1) {
                    const exercicio = this.exerciciosConcluidos.splice(index, 1)[0];
                    exercicio.concluido = false;
                    this.exerciciosPendentes.push(exercicio);
                    return true;
                }
                return false;
            }

            excluirExercicioConcluido(id) {
                const index = this.exerciciosConcluidos.findIndex(ex => ex.id === id);
                if (index !== -1) {
                    this.exerciciosConcluidos.splice(index, 1);
                    return true;
                }
                return false;
            }

            salvarNoStorage() {
                const dados = {
                    pendentes: this.exerciciosPendentes,
                    concluidos: this.exerciciosConcluidos
                };
                localStorage.setItem('treinoApp', JSON.stringify(dados));
            }

            carregarDoStorage() {
                const dados = localStorage.getItem('treinoApp');
                if (dados) {
                    const parsed = JSON.parse(dados);
                    this.exerciciosPendentes = parsed.pendentes || [];
                    this.exerciciosConcluidos = parsed.concluidos || [];
                    return true;
                }
                return false;
            }

            limparTudo() {
                this.exerciciosPendentes = [];
                this.exerciciosConcluidos = [];
                localStorage.removeItem('treinoApp');
            }
        }

        const gerenciador = new GerenciadorExercicios();

        const form = document.getElementById('exercicioForm');
        const listaPendentes = document.getElementById('listaPendentes');
        const listaConcluidos = document.getElementById('listaConcluidos');

        function mostrarFeedback(mensagem, tipo = 'success') {
            const feedback = document.createElement('div');
            feedback.className = `feedback ${tipo}`;
            feedback.textContent = mensagem;
            document.body.appendChild(feedback);

            setTimeout(() => {
                feedback.remove();
            }, 3000);
        }

        function validarCampo(input, errorElement, validacao, mensagemErro) {
            if (!validacao(input.value)) {
                input.classList.add('input-error');
                errorElement.textContent = mensagemErro;
                errorElement.classList.add('show');
                return false;
            } else {
                input.classList.remove('input-error');
                errorElement.classList.remove('show');
                return true;
            }
        }

        function validarFormulario() {
            const exercicio = document.getElementById('exercicio');
            const series = document.getElementById('series');
            const repeticoes = document.getElementById('repeticoes');
            const carga = document.getElementById('carga');

            let valido = true;

            valido &= validarCampo(
                exercicio,
                document.getElementById('errorExercicio'),
                val => val.trim().length > 0,
                'Campo obrigat√≥rio'
            );

            valido &= validarCampo(
                series,
                document.getElementById('errorSeries'),
                val => val >= 1 && val <= 20,
                'Insira entre 1 e 20 s√©ries'
            );

            valido &= validarCampo(
                repeticoes,
                document.getElementById('errorRepeticoes'),
                val => val >= 1 && val <= 100,
                'Insira entre 1 e 100 repeti√ß√µes'
            );

            valido &= validarCampo(
                carga,
                document.getElementById('errorCarga'),
                val => val >= 0 && val <= 500,
                'M√°ximo 500 kg'
            );

            return valido;
        }

        function renderizarListas() {
            if (gerenciador.exerciciosPendentes.length === 0) {
                listaPendentes.innerHTML = `
                    <div class="empty-state">
                        <p>Nenhum exerc√≠cio pendente</p>
                        <p style="font-size: 0.9em;">Adicione um novo exerc√≠cio acima</p>
                    </div>
                `;
            } else {
                listaPendentes.innerHTML = gerenciador.exerciciosPendentes.map(ex => `
                    <div class="exercicio-item">
                        <div class="exercicio-header">
                            <span class="exercicio-nome">${ex.nome}</span>
                        </div>
                        <div class="exercicio-detalhes">
                            <div class="detalhe-item">
                                <span class="detalhe-label">S√©ries</span>
                                <span class="detalhe-valor">${ex.series}</span>
                            </div>
                            <div class="detalhe-item">
                                <span class="detalhe-label">Repeti√ß√µes</span>
                                <span class="detalhe-valor">${ex.repeticoes}</span>
                            </div>
                            <div class="detalhe-item">
                                <span class="detalhe-label">Carga</span>
                                <span class="detalhe-valor">${ex.carga} kg</span>
                            </div>
                        </div>
                        <div class="exercicio-actions">
                            <button class="btn-success btn-small" onclick="concluirExercicio(${ex.id})">
                                ‚úì Concluir
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            if (gerenciador.exerciciosConcluidos.length === 0) {
                listaConcluidos.innerHTML = `
                    <div class="empty-state">
                        <p>Nenhum exerc√≠cio conclu√≠do</p>
                        <p style="font-size: 0.9em;">Complete exerc√≠cios para v√™-los aqui</p>
                    </div>
                `;
            } else {
                listaConcluidos.innerHTML = gerenciador.exerciciosConcluidos.map(ex => `
                    <div class="exercicio-item concluido">
                        <div class="exercicio-header">
                            <span class="exercicio-nome">${ex.nome}</span>
                        </div>
                        <div class="exercicio-detalhes">
                            <div class="detalhe-item">
                                <span class="detalhe-label">S√©ries</span>
                                <span class="detalhe-valor">${ex.series}</span>
                            </div>
                            <div class="detalhe-item">
                                <span class="detalhe-label">Repeti√ß√µes</span>
                                <span class="detalhe-valor">${ex.repeticoes}</span>
                            </div>
                            <div class="detalhe-item">
                                <span class="detalhe-label">Carga</span>
                                <span class="detalhe-valor">${ex.carga} kg</span>
                            </div>
                        </div>
                        <div class="exercicio-actions">
                            <button class="btn-warning btn-small" onclick="desfazerConclusao(${ex.id})">
                                ‚Ü∂ Desfazer
                            </button>
                            <button class="btn-danger btn-small" onclick="excluirExercicio(${ex.id})">
                                üóë Excluir
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            gerenciador.salvarNoStorage();
        }

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            
            if (!validarFormulario()) {
                mostrarFeedback('Por favor, corrija os erros no formul√°rio', 'error');
                return;
            }

            const exercicio = new Exercicio(
                document.getElementById('exercicio').value,
                document.getElementById('series').value,
                document.getElementById('repeticoes').value,
                document.getElementById('carga').value
            );

            gerenciador.adicionarExercicio(exercicio);
            mostrarFeedback('Exerc√≠cio adicionado com sucesso!');
            form.reset();
            document.getElementById('series').value = '3';
            document.getElementById('repeticoes').value = '12';
            document.getElementById('carga').value = '0';
            renderizarListas();
        });

        document.getElementById('limparForm').addEventListener('click', () => {
            form.reset();
            document.getElementById('series').value = '3';
            document.getElementById('repeticoes').value = '12';
            document.getElementById('carga').value = '0';
            document.querySelectorAll('.input-error').forEach(el => el.classList.remove('input-error'));
            document.querySelectorAll('.error-message').forEach(el => el.classList.remove('show'));
        });

        document.getElementById('gravar').addEventListener('click', () => {
            gerenciador.salvarNoStorage();
            mostrarFeedback('Dados salvos com sucesso!');
        });

        document.getElementById('recuperar').addEventListener('click', () => {
            if (gerenciador.carregarDoStorage()) {
                mostrarFeedback('Dados recuperados com sucesso!');
                renderizarListas();
            } else {
                mostrarFeedback('Nenhum dado salvo encontrado', 'error');
            }
        });

        document.getElementById('limpar').addEventListener('click', () => {
            if (confirm('Tem certeza que deseja limpar todos os dados? Esta a√ß√£o n√£o pode ser desfeita.')) {
                gerenciador.limparTudo();
                mostrarFeedback('Todos os dados foram removidos');
                renderizarListas();
            }
        });

        function concluirExercicio(id) {
            if (gerenciador.concluirExercicio(id)) {
                mostrarFeedback('Exerc√≠cio conclu√≠do! Parab√©ns! üí™');
                renderizarListas();
            }
        }

        function desfazerConclusao(id) {
            if (gerenciador.desfazerConclusao(id)) {
                mostrarFeedback('Conclus√£o desfeita');
                renderizarListas();
            }
        }

        function excluirExercicio(id) {
            if (confirm('Deseja realmente excluir este exerc√≠cio?')) {
                if (gerenciador.excluirExercicioConcluido(id)) {
                    mostrarFeedback('Exerc√≠cio exclu√≠do');
                    renderizarListas();
                }
            }
        }

        document.getElementById('exercicio').addEventListener('input', function() {
            validarCampo(
                this,
                document.getElementById('errorExercicio'),
                val => val.trim().length > 0,
                'Campo obrigat√≥rio'
            );
        });

        document.getElementById('series').addEventListener('input', function() {
            validarCampo(
                this,
                document.getElementById('errorSeries'),
                val => val >= 1 && val <= 20,
                'Insira entre 1 e 20 s√©ries'
            );
        });

        document.getElementById('repeticoes').addEventListener('input', function() {
            validarCampo(
                this,
                document.getElementById('errorRepeticoes'),
                val => val >= 1 && val <= 100,
                'Insira entre 1 e 100 repeti√ß√µes'
            );
        });

        document.getElementById('carga').addEventListener('input', function() {
            validarCampo(
                this,
                document.getElementById('errorCarga'),
                val => val >= 0 && val <= 500,
                'M√°ximo 500 kg'
            );
        });

        gerenciador.carregarDoStorage();
        renderizarListas();
    </script>
</body>
</html>